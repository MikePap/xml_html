<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<title>Animazione lineari </title>
<style type="text/css">
html, body, div, p{margin:0; padding:0; }
body{ background:#333; color:#fff; }
p{padding:10px; }

div.box{
float:left;	width:160px; height:160px; margin:31px;  /*border:1px solid #0f0;*/
}
#inWeb, svg#inWebAnimato{
width:100%; height:100%; margin:0; border: 1px solid #fff;
}
#inWeb{
border: 1px solid #fff;
}

embed{
width:160px; height:160px; margin:31px;
}

</style>
</head>
<body>

<p>
<button id="disegna">disegna</button>
<button id="resetta">Resetta</button>
</p>

<div class="box"> 
	<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="inWeb" width="160" height="160" >

		<!-- guide 
		<line x1="80" y1="0" x2="80" y2="160"  style="stroke:yellow;stroke-width:1"/>		
		<line x1="0" y1="80" x2="160" y2="80"  style="stroke:yellow;stroke-width:1"/>		
-->
		<!--quadrato rosso-->
		<g style="stroke:rgb(255,0,0);stroke-width:1">
			<line x1="20" y1="1" x2="140" y2="1" />
			<line x1="140" y1="0" x2="140" y2="100" />
			<line x1="140" y1="100" x2="20" y2="100" />
			<line x1="20" y1="100" x2="20" y2="1"  />
		</g>

		<!--quadrato verde-->
		<g style="stroke:#0f0;stroke-width:1">
			<line x1="1" y1="40" x2="80" y2="40" />
			<line x1="80" y1="40" x2="80" y2="120" />		
			<line x1="80" y1="120" x2="1" y2="120" />
			<line x1="1" y1="120" x2="1" y2="40" />
		</g>

		<!--quarato blu-->
		<g style="stroke:#1E90FF;stroke-width:1">
			<line x1="59" y1="80" x2="159" y2="80" />		
			<line x1="159" y1="79" x2="159" y2="159" />		
			<line x1="159" y1="159" x2="59" y2="159" />		
			<line x1="60" y1="159" x2="60" y2="80" />		
		</g>

		<!--quadrato centrale -->
		<rect x="61" y="81" width="18" height="18" style="fill:#ff0"/>		

	</svg>
</div>


<div class="box">
	<svg width="160" height=160>				

		<path id="rosso1" fill="none" stroke="red" stroke-width="1" stroke-miterlimit="0"
				d="M80,100 140,100 140,1 20,1 20,100 80,100 Z"	stroke-dasharray="438 438" stroke-dashoffset="438" >
			<animate attributeName="stroke-dashoffset" begin="0;blu1.end" dur="2s" from="438" to="0" fill="freeze"   />
		</path>
		<path id="verde1" fill="none" stroke="#0f0" stroke-width="1" stroke-miterlimit="0"
				d="M80,100 80,40 1,40 1,120 80,120	80,100 Z" stroke-dasharray="318 318" stroke-dashoffset="318" >
			<animate attributeName="stroke-dashoffset" begin="2s" dur="2s" from="318" to="0" fill="freeze" />
		</path>
		<path id="blu1" fill="none" stroke="#1E90FF" stroke-width="1" stroke-miterlimit="0"
				d="M80,80 60,80 60,159 159,159 159,80 80,80 Z" stroke-dasharray="356 356" stroke-dashoffset="356">
			<animate attributeName="stroke-dashoffset" begin="4s" dur="2s" from="356" to="0" fill="freeze" />
		</path>
		<rect x="61" y="81" width="18" height="18" fill="transparent">
			<animate	attributeName="fill" attributeType="XML" dur="10ms" begin="6.1s" values="transparent; #fff" fill="freeze"	/>
		</rect>		

		<script type="application/ecmascript"> <![CDATA[
/*				var path = document.getElementById('blu');
				var lunghezza = path.getTotalLength();
				console.log(lunghezza);				// 438 - 318 - 356
*/		]]> </script>
	</svg> 
</div> 


<div class="box"> 
	<svg width="160" height=160>				

		<path id="rosso" fill="none" stroke="red" stroke-width="1" stroke-miterlimit="0"
			d="M80,100 140,100 140,1 20,1 20,100 80,100 Z"
		/>

		<path id="verde" fill="none" stroke="#0f0" stroke-width="1" stroke-miterlimit="0"
			d="M80,100 80,40 1,40 1,120 80,120	80,100 Z"
		/>

		<path id="blu" fill="none" stroke="#1E90FF" stroke-width="1" stroke-miterlimit="0"
			d="M80,80 60,80 60,159 159,159 159,80 80,80 Z"
		/>

		<symbol id="rettangoloBianco">
			<rect x="61" y="81" width="18" height="18" fill="transparent">
				<animate	attributeName="fill" attributeType="XML" dur="10ms" begin="8.1s" values="transparent; #fff" fill="freeze"	/>
			</rect>		
		</symbol>

		<use />

		<script type="application/ecmascript"> <![CDATA[
			var pathRosso = document.getElementById('rosso');
			var pathVerde = document.getElementById('verde');
			var pathBlu = document.getElementById('blu');
	
			pathRosso.getTotalLength();				// 
			pathVerde.getTotalLength();				// 
			pathBlu.getTotalLength();				// 
			var lunghezza1 = pathRosso.getTotalLength();
			var lunghezza2 = pathVerde.getTotalLength();
			var lunghezza3 = pathBlu.getTotalLength();

			pathRosso.style.transition = pathRosso.style.webkitTransition = 'none';
			pathVerde.style.transition = pathVerde.style.webkitTransition = 'none';
			pathBlu.style.transition = pathBlu.style.webkitTransition = 'none';

			pathRosso.style.strokeDasharray = lunghezza1 + ' ' + lunghezza1;
			pathRosso.style.strokeDashoffset = lunghezza1;
			pathVerde.style.strokeDasharray = lunghezza2 + ' ' + lunghezza2;
			pathVerde.style.strokeDashoffset = lunghezza2;
			pathBlu.style.strokeDasharray = lunghezza3 + ' ' + lunghezza3;
			pathBlu.style.strokeDashoffset = lunghezza3;

//			path.getBoundingClientRect();					// ??

			var disegna = document.getElementById('disegna');
			disegna.addEventListener('click', function (){
				pathRosso.style.strokeDashoffset = '0';
				pathVerde.style.strokeDashoffset = '0';
				pathBlu.style.strokeDashoffset = '0';

				pathRosso.style.transition = pathRosso.style.webkitTransition = 'stroke-dashoffset 2s ease-in-out';		
				pathVerde.style.transition = pathVerde.style.webkitTransition = 'stroke-dashoffset 2s ease-in-out 2s';		
				pathBlu.style.transition = pathBlu.style.webkitTransition = 'stroke-dashoffset 2s ease-in-out 4s';		

				var use = document.querySelector('use');
				use.setAttribute("xlink:href", "#rettangoloBianco");			// NON FUNZIONA 
			}, false);

			var resetta = document.getElementById('resetta');
			resetta.addEventListener('click', function (){
				pathRosso.style.transition = pathRosso.style.webkitTransition = 'none';		
				pathVerde.style.transition = pathVerde.style.webkitTransition = 'none';		
				pathBlu.style.transition = pathBlu.style.webkitTransition = 'none';		

//				pathRosso.style.strokeDasharray = lunghezza1 + ' ' + lunghezza1;
				pathRosso.style.strokeDashoffset = lunghezza1;
//				pathVerde.style.strokeDasharray = lunghezza2 + ' ' + lunghezza2;
				pathVerde.style.strokeDashoffset = lunghezza2;
//				pathBlu.style.strokeDasharray = lunghezza3 + ' ' + lunghezza3;
				pathBlu.style.strokeDashoffset = lunghezza3;

			}, false);

		]]> </script>
	</svg> 
</div>

<div class="box"> 
<!--
	<object type="image/svg+xml" data="../allegati/InWeb.svg" ></object>
-->
<!--[if lt IE 9]>
<embed src="allegati/InWeb.svg" type="image/svg+xml" wmode="transparent" />
<![endif]--> 

</div>

<script type="text/javascript">
/*
var boxImg = document.querySelector('div.box > img');
var boxObject = document.querySelector('div.box > object');

window.onload = function (){
//	boxImg.src = "../allegati/InWeb.svg";
	boxObject.data = "../allegati/InWeb.svg";
}
*/

</script>


<!--

@ begin @
dur=500(primo e ultimo) e 1000(altri)		=>	500	1500	2500	3500	-	   		 
con dur=250(primo e ultimo) e 500(altri)	=>	250	750	1250	1750	-	2000	2250	2750	3250	3750	- 4000	4250	4750	5250	5750	(6000)
rettangolo centrale 

-->


</body>
</html>
