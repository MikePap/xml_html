<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>xml e jQuery</title>
<style type="text/css">
body{  font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px;}

h1{ color: #00F;}
h3{ color:#663333;}
dt{ color:#003399; margin-bottom:5px;}
dd{ color:#0066FF;}
.nota{ color:#FF6666;}
.codice{ color:#060}

table{ border-collapse:collapse; margin:10px; background:rgb(220,220,255); }
td{ text-align:center; font-size:12px;}
th{ background:rgb(150,150,250);}

#jk{ position:relative; width:60%; margin:10px; padding:5px 10px; background:rgb(250,250,100); border:1px solid #999;  }


</style>

<script type="text/javascript" src="../allegati/jQuery-1.6.min.js"></script> 

</head>

<body>



<h1>XML parsed by jQuery with ajax</h1>



<script  type="text/javascript">
$(document).ready(function(){


$.ajax({
type: "GET",
url: "../allegati/books.xml",
dataType: "xml",
success: function(xml) {  


//alert($(xml).find('price').length);
//alert($(xml).find('price').text());

//$(xml).find('price').text().appendTo("#jk");  // NON FUNZIONA 
//$('#jk').append( $(xml).find('price').eq(1).text() );  // FUNZIONA
//alert( $(xml).find('title').text() );

			
$(xml).find('book').each(function(){
//$(xml).find('book').eq(1).each(function(){ // recupera soltanto il secondo nodo 'book'
//alert( $(this).find('title').text() ); // mostra tutti i nodi 'title'
/*
var yy = $(this).find('price').text();
if(yy > 30){
//if(yy == 39.95){
//alert(yy); 
$('#jk').append("<p class='codice'>"+yy+"</p>");  // aggiunge solo i textNode che hanno valore maggiore di '30'
//$('#jk').append('<br >'); // da spazio dopo ogni ritrovato
*/


var lingua = $(this).find('title').attr('lang');
var title = $(this).find('title').text();
if(lingua == 'en')
//if(lingua == 'it')
//alert(title);
$('#jk').append("<p class='codice'>"+title+"</p>"); // aggiunge soltanto i nodi 'title' che hanno attributo "lang=en" 


/*
//## Ricavare il valore (testo) di un elemento che sta all'interno di un'altro elemento
var figlio = $(this).find('nido').find('figlio').text();
$('#jk').append("<p class='codice'>"+figlio+"</p>");
*/

}); // chiude each 
			
} // chiude success
}); // chiude ajax


}); // chiude ready 
</script>


<div id="jk"></div>































</body>
</html>
