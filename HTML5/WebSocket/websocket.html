<!DOCTYPE html>  
<html lang="it">
<head>
<meta charset="utf-8" />  
<title>WebSocket Test</title> 
<style type="text/css">

</style> 

<script type="text/javascript">  

var wsUri = "ws://echo.websocket.org/";					// OK
//var wsUri = "ws://websocket.org/";						// NON FUNZIONA (da errore)
//var wsUri = "ws://echo.localhost";						// NON FUNZIONA
//var wsUri = "ws://0.0.0.0:8080";
//var wsUri = "ws://echo.abcoliodoliva.com/";
var output;  
function init() 
{ 
	output = document.getElementById("output"); 
	testWebSocket(); 
}
  
function testWebSocket() 
{ 
	websocket = new WebSocket(wsUri); 
	websocket.onopen = function(evt) 
	{ 
		onOpen(evt) 
	}; 
	websocket.onclose = function(evt) 
	{ 
		onClose(evt) 
	}; 
	websocket.onmessage = function(evt) 
	{ 
		onMessage(evt) 
	}; 
	websocket.onerror = function(evt) 
	{ 
		onError(evt) 
	}; 
}  

function onOpen(evt) 
{ 
	writeToScreen("CONNECTED"); 
//	document.write("Connesso")
	doSend("WebSocket rocks"); 
}  

function onClose(evt) 
{ 
	writeToScreen("DISCONNECTED"); 
}  

function onMessage(evt) 
{ 
	writeToScreen('<span style="color: blue;">RESPONSE: ' + evt.data+'</span>'); 
	websocket.close(); 
}  

function onError(evt) 
{ 
	writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data); 
}  

function doSend(message) 
{ 
	writeToScreen("SENT: " + message);  
	websocket.send(message); 
}  

function writeToScreen(message) 
{ 
	var pre = document.createElement("p"); 
	pre.style.wordWrap = "break-word"; 
	pre.innerHTML = message; 
	output.appendChild(pre); 
}  

window.addEventListener("load", init, false);  

</script>  <h2>WebSocket Test</h2>  
</head>
<body>


<div id="output"></div>  




<!--

http://www.unaprol.it/images/stories/News%20Mercati%20sett%2047_13.pdf

http://www.unaprol.it/images/stories/News%20Mercati%20sett%2045_13.pdf

-->




</body>
</html>

